platform: linux
image_resource:
  type: docker-image
  source: {repository: amidos/dcind, tag: 2}
inputs:
  - name: image
  - name: repo
run:
  path: bash
  args:
    - -exc
    - |
      source /docker-lib.sh &>/dev/null
      start_docker &>/dev/null

      docker load -i image/image.tar &>/dev/null

      # Gives a way to visually check the image has been loaded
      # docker images 

      cd repo &>/dev/null
      ((script))

      # Cleanup
      docker-compose stop 2>/dev/null
      docker-compose rm -f 2>/dev/null